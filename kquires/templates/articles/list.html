{% extends 'pages/layout/sidebar.html' %}
{% load static %}
{% load i18n %}
{% block title %}
  kquires |{% trans 'Articles List' %}
{% endblock %}
{% block content %}
  <style>
    .form-section {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
    }
    .profile-card {
      text-align: center;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
    }
    .profile-card img {
      border-radius: 50%;
      max-width: 150px;
      margin-bottom: 10px;
    }
    .custom-table {
      border-radius: 8px;
      overflow: hidden;
    }
    .custom-table thead {
      background-color: #f1f5f9;
    }
    .custom-table tbody tr {
      background-color: #ffffff;
    }
    .custom-table tbody tr:nth-child(even) {
      background-color: #f8f9fa;
    }
    .new-ticket-btn {
      margin-top: 10px;
    }
    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #f8f9fa;
      padding: 10px;
    }
    .btn-new {
      background-color: #007bff;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }
    .btn-new:hover {
      background-color: #0056b3;
    }
    .search-bar input {
      width: 300px;
      padding: 8px;
      border-radius: 4px;
    }
    .btn-categories {
      background-color: #f1f1f1;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
    }
  </style>

  <div class="d-flex align-items-center justify-content-between bg-light p-2">
    <div class="text-center" style="font-size: 20px; color:black; font-weight: bold; cursor: pointer;">
      {% trans 'Articles' %}
    </div>

    <div class="search-bar mx-auto" style="width: 300px; position: relative;">
      <form id="search-form" hx-get="{% url 'articles:list' %}" hx-target="#articles-table" hx-trigger="keyup changed delay:300ms">
        <input 
            type="text" 
            id="article-search" 
            class="form-control form-control-sm" 
            placeholder="{% trans 'Search Articles' %}" 
            name="q"
            value="{{ search_query|default:'' }}"
            {% if LANGUAGE_CODE == 'ar' %}
                dir="rtl"
                style="padding-right: 10px; text-align: right;"
            {% else %}
                dir="ltr"
                style="padding-left: 10px; text-align: left;"
            {% endif %}
        />
      </form>
  
      {% if LANGUAGE_CODE == 'ar' %}
        <img src="{% static 'images/searchb.svg' %}" alt="{% trans 'Search Icon' %}"
            class="position-absolute top-50 start-0 translate-middle-y"
            style="width: 20px; height: 20px;">
      {% else %}
        <img src="{% static 'images/searchb.svg' %}" alt="{% trans 'Search Icon' %}"
            class="position-absolute top-50 end-0 translate-middle-y"
            style="width: 20px; height: 20px;">
      {% endif %}
    </div>

    <button type="button" class="btn btn-primary new-article-btn" data-bs-toggle="modal" data-bs-target="#newArticleModal">+{% trans 'New Article' %}</button>
    <a href="{% url 'articles:export_activity_log_excel' %}"><img src="{% static 'images/export.svg' %}" alt="{% trans 'Section Icon' %}" class="ms-2" /></a>
  </div>

  <div class="container-fluid mt-3">
    <div class="form-section">
      <div id="articles-table">
        {% include 'articles/partials/table.html' %}
      </div>
    </div>
  </div>

  {% include 'articles/partials/form.html' %}

  <script>
    document.getElementById('newArticleModal').addEventListener('hide.bs.modal', function () {
      document.getElementById('id').value = ''
      document.getElementById('title').value = ''
      document.getElementById('category').value = ''
      document.getElementById('subcategory').value = ''
      document.getElementById('short_description').value = ''
      if (window.briefDescriptionEditor) {
        window.briefDescriptionEditor.setData('')
      } else {
        // Fallback for textarea
        const textarea = document.querySelector('#brief_description')
        if (textarea) {
          textarea.value = ''
        }
      }
      // Reset form action to create URL
      const form = document.getElementById('articleForm')
      if (form) {
        form.action = '{% url "articles:create" %}'
      }
    })

    // 🌍 Multi-language state
    window.currentArticleId = null;
    window.mainArticleId = null;
    window.currentLanguage = 'english';

    // Set default form action to create URL
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('articleForm')
      if (form) {
        form.action = '{% url "articles:create" %}'
      }
    })

    // 🌍 Language switching function
    window.switchArticleLanguage = function(language) {
      if (window.mainArticleId) {
        window.fetchArticleDetails(window.mainArticleId, language);
      } else if (window.currentArticleId) {
        window.fetchArticleDetails(window.currentArticleId, language);
      }
    };

    // 🌍 Fetch article with optional language param
    window.fetchArticleDetails = function(articleId, language = 'english') {
      window.currentArticleId = articleId;
      window.currentLanguage = language;

      fetch(`{% url 'articles:article_detail_api' '000' %}`.replace('000', articleId) + `?language=${language}`)
        .then((response) => response.json())
        .then((data) => {
          // Check if translation is in progress or not translated
          if ((data.translation_status === 'translation_in_progress' || data.translation_status === 'not_translated') && data.translation_message) {
            // Show alert inside the modal
            const modalBody = document.querySelector('#newArticleModal .modal-body')
            if (modalBody) {
              // Remove any existing alerts
              const existingAlert = modalBody.querySelector('.translation-alert')
              if (existingAlert) {
                existingAlert.remove()
              }
              
              // Create alert inside modal
              const alertDiv = document.createElement('div')
              // alertDiv.className = 'alert alert-warning alert-dismissible fade show translation-alert'
              // alertDiv.innerHTML = `
              //   <strong><i class="fas fa-language"></i> Translation to ${language} Unavailable</strong><br>
              //   ${data.translation_message || 'The AI translation service is currently not available. Please check your OpenAI API key configuration.'}<br>
              //   <small class="text-muted">You can still edit the article in ${data.language} language.</small><br>
              //   <button type="button" class="btn btn-sm btn-outline-primary mt-2" onclick="testTranslationService()">
              //     <i class="fas fa-test-tube"></i> Test Translation Service
              //   </button>
              //   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              // `
              
              // Insert at the top of modal body
              modalBody.insertBefore(alertDiv, modalBody.firstChild)
              
              // Auto-remove after 8 seconds
              setTimeout(() => {
                if (alertDiv.parentNode) {
                  alertDiv.remove()
                }
              }, 8000)
            }
            
          // Fill the form with original content (not placeholder text)
          document.getElementById('id').value = data.id
          document.getElementById('title').value = data.title
          document.getElementById('short_description').value = data.short_description
          document.getElementById('current_language').value = data.current_language

          // Set form action to update URL for existing articles
          const form = document.getElementById('articleForm')
          if (form && data.id) {
            form.action = `{% url 'articles:update' 0 %}`.replace('0', data.id)
          }

          window.currentArticleId = data.id
          window.mainArticleId = data.main_id

            // Initialize CKEDITOR 5 for the original content
            if (window.briefDescriptionEditor) {
              window.briefDescriptionEditor.destroy()
            }

            if (typeof ClassicEditor !== 'undefined') {
              ClassicEditor
                .create(document.querySelector('#brief_description'), {
                  toolbar: {
                    items: [
                      'heading', '|',
                      'bold', 'italic', 'link', '|',
                      'bulletedList', 'numberedList', '|',
                      'outdent', 'indent', '|',
                      'imageUpload', 'blockQuote', 'insertTable', '|',
                      'undo', 'redo'
                    ]
                  },
                  language: 'en',
                  image: {
                    toolbar: [
                      'imageTextAlternative',
                      'imageStyle:full',
                      'imageStyle:side'
                    ]
                  },
                  table: {
                    contentToolbar: [
                      'tableColumn',
                      'tableRow',
                      'mergeTableCells'
                    ]
                  }
                })
                .then(editor => {
                  window.briefDescriptionEditor = editor;
                  editor.setData(data.brief_description || '');
                })
                .catch(error => {
                  console.error('Error initializing CKEDITOR:', error);
                  document.querySelector('#brief_description').value = data.brief_description || '';
                });
            } else {
              document.querySelector('#brief_description').value = data.brief_description || '';
            }

            // ✅ Category selection
            const categorySelect = document.getElementById('category')
            if (categorySelect && data.category_id) {
              categorySelect.value = data.category_id
              // Load subcategories for selected category
              loadSubcategories(data.category_id, data.subcategory_id)
            }

            // 🌍 Update language switcher UI
            const languageSwitcher = document.getElementById('languageSwitcher');
            if (languageSwitcher) {
              languageSwitcher.style.display = 'block';
              const languageDropdown = document.getElementById('languageDropdown');
              if (languageDropdown) {
                languageDropdown.innerHTML = data.current_language === 'english' ? '🇺🇸 English' : '🇸🇦 العربية';
              }
              const viewEnglish = document.getElementById('viewEnglish');
              const viewArabic = document.getElementById('viewArabic');
              if (viewEnglish && viewArabic) {
                if (!data.has_arabic) {
                  viewArabic.innerHTML = '🇸🇦 العربية +';
                  viewArabic.title = '{% trans "Create Arabic translation" %}';
                } else {
                  viewArabic.innerHTML = '🇸🇦 العربية';
                  viewArabic.title = '{% trans "View in Arabic" %}';
                }
                viewEnglish.innerHTML = '🇺🇸 English';
                viewEnglish.title = '{% trans "View in English" %}';
              }
            }

            // Modal title with language
            const modalTitle = document.getElementById('newArticleModalLabel');
            if (modalTitle) {
              modalTitle.innerHTML = `{% trans 'View Article' %} <small class="text-muted">(${data.current_language})</small>`;
            }

            var modal = new bootstrap.Modal(document.getElementById('newArticleModal'), {
              backdrop: true,
              keyboard: true,
              focus: true
            })
            modal.show()
            
            // Don't continue with the rest of the function
            return
          }

          // Normal flow for successful translations
          document.getElementById('id').value = data.id
          document.getElementById('title').value = data.title
          document.getElementById('short_description').value = data.short_description
          document.getElementById('current_language').value = data.current_language

          // Set form action to update URL for existing articles
          const form = document.getElementById('articleForm')
          if (form && data.id) {
            form.action = `{% url 'articles:update' 0 %}`.replace('0', data.id)
          }

          window.currentArticleId = data.id
          window.mainArticleId = data.main_id

          // Initialize CKEDITOR 5
          if (window.briefDescriptionEditor) {
            window.briefDescriptionEditor.destroy()
          }

          if (typeof ClassicEditor !== 'undefined') {
            ClassicEditor
              .create(document.querySelector('#brief_description'), {
                toolbar: {
                  items: [
                    'heading', '|',
                    'bold', 'italic', 'link', '|',
                    'bulletedList', 'numberedList', '|',
                    'outdent', 'indent', '|',
                    'imageUpload', 'blockQuote', 'insertTable', '|',
                    'undo', 'redo'
                  ]
                },
                language: 'en',
                image: {
                  toolbar: [
                    'imageTextAlternative',
                    'imageStyle:full',
                    'imageStyle:side'
                  ]
                },
                table: {
                  contentToolbar: [
                    'tableColumn',
                    'tableRow',
                    'mergeTableCells'
                  ]
                }
              })
              .then(editor => {
                window.briefDescriptionEditor = editor;
                editor.setData(data.brief_description || '');
              })
              .catch(error => {
                console.error('Error initializing CKEDITOR:', error);
                // Fallback to textarea
                document.querySelector('#brief_description').value = data.brief_description || '';
              });
          } else {
            console.warn('CKEDITOR not loaded, using textarea fallback');
            document.querySelector('#brief_description').value = data.brief_description || '';
          }

          // ✅ Category selection
          const categorySelect = document.getElementById('category')
          if (categorySelect && data.category_id) {
            categorySelect.value = data.category_id
            // Load subcategories for selected category
            loadSubcategories(data.category_id, data.subcategory_id)
          }

          // 🌍 Update language switcher UI
          const languageSwitcher = document.getElementById('languageSwitcher');
          if (languageSwitcher) {
            languageSwitcher.style.display = 'block';
            const languageDropdown = document.getElementById('languageDropdown');
            if (languageDropdown) {
              languageDropdown.innerHTML = data.current_language === 'english' ? '🇺🇸 English' : '🇸🇦 العربية';
            }
            const viewEnglish = document.getElementById('viewEnglish');
            const viewArabic = document.getElementById('viewArabic');
            if (viewEnglish && viewArabic) {
              if (!data.has_arabic) {
                viewArabic.innerHTML = '🇸🇦 العربية +';
                viewArabic.title = '{% trans "Create Arabic translation" %}';
              } else {
                viewArabic.innerHTML = '🇸🇦 العربية';
                viewArabic.title = '{% trans "View in Arabic" %}';
              }
              viewEnglish.innerHTML = '🇺🇸 English';
              viewEnglish.title = '{% trans "View in English" %}';
            }
          }

          // Modal title with language
          const modalTitle = document.getElementById('newArticleModalLabel');
          if (modalTitle) {
            modalTitle.innerHTML = `{% trans 'View Article' %} <small class="text-muted">(${data.current_language})</small>`;
          }

          var modal = new bootstrap.Modal(document.getElementById('newArticleModal'), {
            backdrop: true,
            keyboard: true,
            focus: true
          })
          modal.show()
        })
        .catch((error) => console.error('Error fetching article details:', error))
    }

    function setDeleteFormAction(targetId) {
      const deleteForm = document.getElementById('deleteForm')
      const deleteUrl = `{% url 'articles:delete' '000' %}`.replace('000', targetId)
      deleteForm.action = deleteUrl
    }

    function setStatusModalData(targetId, status) {
      const form = document.getElementById('statusUpdateForm')
      if (!form) {
        console.error('Status update form not found');
        return;
      }
      
      try {
        const actionUrl = `{% url 'articles:status' '000' %}`.replace('000', targetId)
        form.action = actionUrl

        let statusInput = form.querySelector('input[name="status"]')
        if (!statusInput) {
          statusInput = document.createElement('input')
          statusInput.type = 'hidden'
          statusInput.name = 'status'
          form.appendChild(statusInput)
        }
        statusInput.value = status
        
        // Show the modal safely
        const modalElement = document.getElementById('statusUpdateModal')
        if (modalElement && typeof bootstrap !== 'undefined') {
          const modal = bootstrap.Modal.getOrCreateInstance(modalElement)
          modal.show()
        }
      } catch (error) {
        console.error('Error setting status modal data:', error)
      }
    }

    function setVisibilityModalData(targetId, visibility) {
      const form = document.getElementById('visibilityToggleForm')
      if (!form) {
        console.error('Visibility toggle form not found');
        return;
      }
      
      try {
        const actionUrl = `{% url 'articles:visibility' '000' %}`.replace('000', targetId)
        form.action = actionUrl

        let visibilityInput = form.querySelector('input[name="visibility"]')
        if (!visibilityInput) {
          visibilityInput = document.createElement('input')
          visibilityInput.type = 'hidden'
          visibilityInput.name = 'visibility'
          form.appendChild(visibilityInput)
        }
        visibilityInput.value = visibility
        
        // Show the modal safely
        const modalElement = document.getElementById('visibilityToggleModal')
        if (modalElement && typeof bootstrap !== 'undefined') {
          const modal = bootstrap.Modal.getOrCreateInstance(modalElement)
          modal.show()
        }
      } catch (error) {
        console.error('Error setting visibility modal data:', error)
      }
    }

    // Handle comment modal
    document.addEventListener('click', function(e) {
      if (e.target.closest('.show-comment')) {
        const comment = e.target.closest('.show-comment').dataset.comment
        document.getElementById('commentText').textContent = comment || 'No comment available'
      }
    })

    // Initialize modals safely
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize all modals with proper configuration
      const modals = document.querySelectorAll('.modal')
      modals.forEach(modal => {
        if (modal && typeof bootstrap !== 'undefined') {
          try {
            new bootstrap.Modal(modal, {
              backdrop: true,
              keyboard: true,
              focus: true
            })
          } catch (error) {
            console.warn('Modal initialization failed:', error)
          }
        }
      })
    })

    // Load subcategories based on selected category
    function loadSubcategories(categoryId, selectedSubcategoryId = null) {
      const subcategorySelect = document.getElementById('subcategory')
      if (!subcategorySelect) return
      
      // Clear existing options
      subcategorySelect.innerHTML = '<option value="" selected>{% trans "Select Subcategory" %}</option>'
      
      if (!categoryId) return
      
      // Fetch subcategories via AJAX
      fetch(`/categories/api/subcategories/${categoryId}/`)
        .then(response => response.json())
        .then(data => {
          data.subcategories.forEach(subcategory => {
            const option = document.createElement('option')
            option.value = subcategory.id
            option.textContent = subcategory.name
            if (selectedSubcategoryId && subcategory.id == selectedSubcategoryId) {
              option.selected = true
            }
            subcategorySelect.appendChild(option)
          })
        })
        .catch(error => {
          console.error('Error loading subcategories:', error)
        })
    }
    
    // Handle category change
    document.getElementById('category').addEventListener('change', function() {
      const categoryId = this.value
      loadSubcategories(categoryId)
    })

    // Test translation service
    window.testTranslationService = function() {
      fetch('/articles/api/test-translation/')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'success') {
            alert('✅ Translation service is working!\n\nTest translation: "' + data.translation_result.translated_text + '"')
          } else {
            alert('❌ Translation service failed:\n\n' + data.message + '\n\nPlease check your OpenAI API key configuration.')
          }
        })
        .catch(error => {
          alert('❌ Error testing translation service:\n\n' + error.message)
        })
    }

    // File drop/upload handlers (unchanged)
    document.addEventListener('DOMContentLoaded', function () {
      const dropzone = document.getElementById('file-dropzone')
      const fileInput = document.getElementById('file_input')

      dropzone.addEventListener('dragover', (event) => {
        event.preventDefault()
        dropzone.classList.add('dragover')
      })

      dropzone.addEventListener('dragleave', () => {
        dropzone.classList.remove('dragover')
      })

      dropzone.addEventListener('drop', async (event) => {
        event.preventDefault()
        dropzone.classList.remove('dragover')
        const files = event.dataTransfer.files
        await handleFiles(files)
      })

      fileInput.addEventListener('change', async () => {
        const files = fileInput.files
        await handleFiles(files)
      })

      async function handleFiles(files) {
        const loader = document.getElementById('loader')
        if (files.length > 0) {
          loader.style.display = 'block'
          for (let i = 0; i < files.length; i++) {
            const file = files[i]
            const formData = new FormData()
            formData.append('file', file)

            try {
              const response = await fetch('/articles/process_file/', { method: 'POST', body: formData })
              if (!response.ok) { console.error('File upload failed.'); return }
              const data = await response.json()

              if (data.image_url && /\.(jpeg|jpg|png|gif|webp)$/i.test(data.image_url)) {
                const BASE_URL = window.location.origin
                const imageURL = data.image_url.startsWith('http') ? data.image_url : BASE_URL + data.image_url

                const img = document.createElement('img')
                img.alt = 'Uploaded Image'
                img.classList.add('d-block')
                img.style = 'max-width: 100%; max-height: 300px;'

                const backendImage = new Image()
                backendImage.crossOrigin = 'anonymous'
                backendImage.src = imageURL

                backendImage.onload = function () {
                  img.src = backendImage.src
                  const imgWrapper = document.createElement('div')
                  imgWrapper.classList.add('uploaded-image')
                  imgWrapper.appendChild(img)
                  setTimeout(() => {
                    if (window.briefDescriptionEditor) {
                      window.briefDescriptionEditor.model.change(writer => {
                        const imageElement = writer.createElement('imageBlock', {
                          src: img.src,
                          alt: 'Uploaded Image'
                        });
                        writer.insert(imageElement, window.briefDescriptionEditor.model.document.getRoot());
                      });
                    }
                  }, 300)
                }
              } else if (data.video_url && /\.(mp4|webm|ogg)$/i.test(data.video_url)) {
                const BASE_URL = window.location.origin
                const videoURL = data.video_url.startsWith('http') ? data.video_url : BASE_URL + data.video_url
                const video = document.createElement('video')
                video.src = videoURL
                video.controls = true
                video.classList.add('d-block', 'w-100')
                video.style = 'max-width: 100%; max-height: 400px;'

                const videoWrapper = document.createElement('div')
                videoWrapper.classList.add('uploaded-video')
                videoWrapper.appendChild(video)
                setTimeout(() => {
                  if (window.briefDescriptionEditor) {
                    window.briefDescriptionEditor.model.change(writer => {
                      const htmlElement = writer.createElement('htmlEmbed', {
                        html: videoWrapper.outerHTML
                      });
                      writer.insert(htmlElement, window.briefDescriptionEditor.model.document.getRoot());
                    });
                  }
                }, 300)
              } else if (data.content) {
                if (window.briefDescriptionEditor) {
                  window.briefDescriptionEditor.model.change(writer => {
                    const contentHtml = `<p><strong>Extracted Content:</strong> </p><p>${data.content.replace(/\n/g, '<br>')}</p>`;
                    const htmlElement = writer.createElement('htmlEmbed', {
                      html: contentHtml
                    });
                    writer.insert(htmlElement, window.briefDescriptionEditor.model.document.getRoot());
                  });
                }
              }
            } catch (error) {
              console.error('Error uploading file:', error)
            }
          }
          loader.style.display = 'none'
        } else {
          alert('Please upload at least one file.')
        }
      }
    })
  </script>

<!-- Status Update Modal -->
<div class="modal fade" id="statusUpdateModal" tabindex="-1" aria-labelledby="statusUpdateModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="statusUpdateForm" method="POST" action="">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="statusUpdateModalLabel">{% trans "Update Status" %}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}"></button>
        </div>
        <div class="modal-body">
          {% trans "Are you sure you want to update the status of this article?" %}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans "Cancel" %}</button>
          <button type="submit" class="btn btn-primary">{% trans "Update" %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Visibility Toggle Modal -->
<div class="modal fade" id="visibilityToggleModal" tabindex="-1" aria-labelledby="visibilityToggleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="visibilityToggleForm" method="POST" action="">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="visibilityToggleModalLabel">{% trans "Toggle Visibility" %}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}"></button>
        </div>
        <div class="modal-body">
          {% trans "Are you sure you want to change the visibility of this article?" %}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans "Cancel" %}</button>
          <button type="submit" class="btn btn-primary">{% trans "Update" %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="deleteForm" method="POST" action="">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="deleteConfirmationModalLabel">{% trans "Confirm Delete" %}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}"></button>
        </div>
        <div class="modal-body">
          {% trans "Are you sure you want to delete this article? This action cannot be undone." %}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans "Cancel" %}</button>
          <button type="submit" class="btn btn-danger">{% trans "Delete" %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Show Comment Modal -->
<div class="modal fade" id="showCommentModal" tabindex="-1" aria-labelledby="showCommentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="showCommentModalLabel">{% trans "Article Comment" %}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}"></button>
      </div>
      <div class="modal-body">
        <p id="commentText"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans "Close" %}</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}
